const { convertPathToPolygon } = require("../functions/convertPathToPolygon");
const SVGParser = require("svg-parser");
const { generateContent } = require("../functions/generateContent");
const fs = require("fs");
const svgPath = "./tests/asset/output.svg";

test("Checks if the function that converts SVG path to CSS clip-path: Polygon format is right", () => {
  expect(
    convertPathToPolygon(
      "M1.264324,299.288391 C1.000000,201.069733 1.027429,103.139427 0.894278,5.209342 C0.889236,1.501132 1.783633,0.907123 5.284847,0.910824 C109.210709,1.020668 213.136703,1.000000 317.531342,1.000000 C320.703796,8.265718 325.397766,15.558586 325.879669,22.697180 C326.585449,33.152302 331.826263,42.267605 332.107239,52.525349 C336.892395,58.358212 338.483032,65.650726 339.408539,72.620415 C340.500519,80.843666 345.304596,87.648582 346.453217,95.719681 C346.983978,99.449333 350.637604,102.002930 351.499023,106.195663 C351.964264,107.005013 352.115295,107.511185 352.189636,108.430634 C351.079987,112.791229 351.952698,116.390030 353.173309,120.335205 C355.282410,127.152130 359.486450,133.398361 358.695557,141.124817 C357.994843,147.970551 362.941589,152.831192 366.208496,158.567795 C367.786194,159.860840 367.680359,161.294891 367.535919,163.080627 C367.355713,165.009583 368.574463,165.711945 369.738220,166.860016 C370.160095,167.566650 370.305664,168.014801 370.422668,168.844635 C370.494720,170.183136 370.490814,171.160706 370.499390,172.506683 C370.460876,176.391998 372.272369,179.462631 373.034851,183.155609 C373.309601,183.953796 373.401520,184.423935 373.457123,185.257629 C373.252411,187.597321 373.743958,189.288651 375.667542,190.781708 C376.041962,191.565552 376.155029,192.050430 376.184998,192.934753 C375.378204,197.677872 378.757751,201.065033 378.927124,205.222916 C379.132233,210.258301 382.484131,214.765228 381.195435,220.155273 C380.699066,222.231293 382.451752,224.208908 383.562653,226.042816 C389.035828,235.077881 391.617432,245.072556 393.585419,255.315536 C394.256134,258.806366 394.303986,262.654083 397.649170,265.578522 C399.253754,270.445099 399.168274,275.322845 398.445221,279.684814 C397.606079,284.747162 398.809021,288.507477 401.894012,291.904266 C404.453400,294.722351 405.817810,298.022797 406.412720,301.540894 C408.455475,313.621033 414.792297,324.363403 417.030853,336.371033 C417.515320,338.969849 417.587952,341.614075 418.313446,344.199249 C418.949280,346.464966 417.917297,348.422424 415.523010,349.931641 C411.024078,350.859253 407.020599,349.413300 402.896423,349.340210 C396.878021,349.233551 391.183136,350.896881 385.338959,351.369232 C378.115417,351.953064 371.066437,353.587585 364.047485,354.897430 C358.098083,356.007690 352.015839,358.320831 346.282715,361.823303 C344.818390,362.411072 343.567139,362.295685 342.147980,362.947021 C341.148041,363.229065 340.464539,363.270294 339.441650,363.215179 C336.967926,362.099640 335.445343,362.478668 334.608093,365.249420 C334.046631,365.795441 333.670166,366.036163 332.944641,366.331238 C331.103455,366.722412 329.677002,367.213654 328.384155,368.660522 C328.054443,369.138245 327.906616,369.322998 327.490967,369.751038 C326.598633,370.399963 325.957092,370.775818 324.916443,371.215088 C321.997070,371.378357 319.454620,373.202667 316.576172,371.143890 C313.180359,367.776947 309.557922,366.963318 305.137787,367.232513 C299.457489,367.578400 293.658203,368.453949 288.021423,366.286041 C285.638275,365.369476 283.823914,366.390839 283.108856,369.442566 C281.383362,371.540710 279.434448,372.263763 276.757751,371.935822 C273.999451,370.265167 274.438782,367.834198 274.431854,365.536896 C274.428497,364.419373 274.850372,363.033173 273.338226,362.593445 C272.130402,362.242249 271.062500,362.912689 270.208221,363.740479 C269.014740,364.896912 268.129913,366.328278 267.005676,367.546967 C262.896973,372.000885 257.764191,372.693481 252.848328,369.197693 C250.009979,367.179260 248.307770,367.368195 247.660156,370.999786 C247.191376,373.628571 246.203445,375.792511 243.278809,376.367523 C240.348831,376.943512 238.081192,375.793884 236.325775,373.513153 C235.208405,372.061371 233.913544,370.801483 232.597565,369.531738 C229.658508,366.695953 226.620972,365.540955 222.810501,367.954590 C220.677475,369.305695 218.072952,369.372253 215.313690,370.052063 C214.469101,370.139801 213.987335,370.093781 213.171097,369.860413 C206.673065,364.314789 199.915833,360.916321 191.304108,362.355957 C187.110275,363.057068 184.076813,360.625671 182.785767,356.468689 C181.147034,351.192261 180.424347,350.875641 175.841232,353.918945 C173.447937,355.508179 170.967270,355.873016 168.288406,355.133636 C167.060638,354.794739 165.949997,353.747925 164.237732,354.816681 C163.400299,354.967651 162.915085,354.946350 162.083481,354.740631 C156.029007,350.362640 150.816971,344.858246 142.197723,347.098450 C141.325821,347.190430 140.829453,347.138916 139.990494,346.880157 C134.926941,343.801758 130.810532,339.591095 124.464836,340.267975 C122.719604,340.454193 121.291527,338.932220 120.764839,337.315430 C119.329948,332.910675 115.981400,332.692535 112.303810,333.179993 C107.771591,333.780701 103.388718,333.794312 99.191345,331.516541 C97.841629,330.784058 96.506844,330.126373 95.688797,328.839386 C94.246941,326.571045 92.322365,325.742828 89.733521,326.482666 C87.150185,327.220856 84.862473,326.580017 82.616142,325.201660 C80.090858,323.652130 77.017937,323.233521 74.445290,322.138000 C68.618271,319.656647 61.615223,317.759369 60.329655,309.812042 C60.018993,307.891571 59.045319,307.764252 57.515820,308.545135 C55.438496,309.605652 53.350086,310.669128 51.130886,311.399750 C47.053345,312.742218 44.939079,311.798035 43.098068,307.871735 C42.318871,306.209991 41.737366,304.466461 41.223705,302.706055 C40.303932,299.553864 39.708347,296.615082 34.928455,298.477020 C31.705284,299.732544 30.390968,295.799469 27.996773,293.900787 C27.171757,290.348511 27.631811,287.106140 27.554432,283.500488 C27.711935,282.642578 27.861876,282.168121 28.126814,281.751007 C31.491653,276.453827 31.213247,275.557648 24.923706,272.609131 C20.204256,270.393036 16.105438,269.639618 12.968152,274.567688 C12.528371,275.258514 11.592462,275.846558 11.714046,276.646545 C12.762436,283.544586 6.822174,289.324493 8.671950,296.413147 C9.174871,298.340393 8.136728,300.416748 6.109797,301.393463 C4.047930,302.387024 2.648661,301.216949 1.264324,299.288391 z",
      400,
      400
    )
  ).toBe(
    "0.316% 74.822%, 0.250% 50.267%, 0.257% 25.785%, 0.224% 1.302%, 0.222% 0.375%, 0.446% 0.227%, 1.321% 0.228%, 27.303% 0.255%, 53.284% 0.250%, 79.383% 0.250%, 80.176% 2.066%, 81.349% 3.890%, 81.470% 5.674%, 81.646% 8.288%, 82.957% 10.567%, 83.027% 13.131%, 84.223% 14.590%, 84.621% 16.413%, 84.852% 18.155%, 85.125% 20.211%, 86.326% 21.912%, 86.613% 23.930%, 86.746% 24.862%, 87.659% 25.501%, 87.875% 26.549%, 87.991% 26.751%, 88.029% 26.878%, 88.047% 27.108%, 87.770% 28.198%, 87.988% 29.098%, 88.293% 30.084%, 88.821% 31.788%, 89.872% 33.350%, 89.674% 35.281%, 89.499% 36.993%, 90.735% 38.208%, 91.552% 39.642%, 91.947% 39.965%, 91.920% 40.324%, 91.884% 40.770%, 91.839% 41.252%, 92.144% 41.428%, 92.435% 41.715%, 92.540% 41.892%, 92.576% 42.004%, 92.606% 42.211%, 92.624% 42.546%, 92.623% 42.790%, 92.625% 43.127%, 92.615% 44.098%, 93.068% 44.866%, 93.259% 45.789%, 93.327% 45.988%, 93.350% 46.106%, 93.364% 46.314%, 93.313% 46.899%, 93.436% 47.322%, 93.917% 47.695%, 94.010% 47.891%, 94.039% 48.013%, 94.046% 48.234%, 93.845% 49.419%, 94.689% 50.266%, 94.732% 51.306%, 94.783% 52.565%, 95.621% 53.691%, 95.299% 55.039%, 95.175% 55.558%, 95.613% 56.052%, 95.891% 56.511%, 97.259% 58.769%, 97.904% 61.268%, 98.396% 63.829%, 98.564% 64.702%, 98.576% 65.664%, 99.412% 66.395%, 99.813% 67.611%, 99.792% 68.831%, 99.611% 69.921%, 99.402% 71.187%, 99.702% 72.127%, 100.474% 72.976%, 101.113% 73.681%, 101.454% 74.506%, 101.603% 75.385%, 102.114% 78.405%, 103.698% 81.091%, 104.258% 84.093%, 104.379% 84.742%, 104.397% 85.404%, 104.578% 86.050%, 104.737% 86.616%, 104.479% 87.106%, 103.881% 87.483%, 102.756% 87.715%, 101.755% 87.353%, 100.724% 87.335%, 99.220% 87.308%, 97.796% 87.724%, 96.335% 87.842%, 94.529% 87.988%, 92.767% 88.397%, 91.012% 88.724%, 89.525% 89.002%, 88.004% 89.580%, 86.571% 90.456%, 86.205% 90.603%, 85.892% 90.574%, 85.537% 90.737%, 85.287% 90.807%, 85.116% 90.818%, 84.860% 90.804%, 84.242% 90.525%, 83.861% 90.620%, 83.652% 91.312%, 83.512% 91.449%, 83.418% 91.509%, 83.236% 91.583%, 82.776% 91.681%, 82.419% 91.803%, 82.096% 92.165%, 82.014% 92.285%, 81.977% 92.331%, 81.873% 92.438%, 81.650% 92.600%, 81.489% 92.694%, 81.229% 92.804%, 80.499% 92.845%, 79.864% 93.301%, 79.144% 92.786%, 78.295% 91.944%, 77.389% 91.741%, 76.284% 91.808%, 74.864% 91.895%, 73.415% 92.113%, 72.005% 91.572%, 71.410% 91.342%, 70.956% 91.598%, 70.777% 92.361%, 70.346% 92.885%, 69.859% 93.066%, 69.189% 92.984%, 68.500% 92.566%, 68.610% 91.959%, 68.608% 91.384%, 68.607% 91.105%, 68.713% 90.758%, 68.335% 90.648%, 68.033% 90.561%, 67.766% 90.728%, 67.552% 90.935%, 67.254% 91.224%, 67.032% 91.582%, 66.751% 91.887%, 65.724% 93.000%, 64.441% 93.173%, 63.212% 92.299%, 62.502% 91.795%, 62.077% 91.842%, 61.915% 92.750%, 61.798% 93.407%, 61.551% 93.948%, 60.820% 94.092%, 60.087% 94.236%, 59.520% 93.948%, 59.081% 93.378%, 58.802% 93.015%, 58.478% 92.700%, 58.149% 92.383%, 57.415% 91.674%, 56.655% 91.385%, 55.703% 91.989%, 55.169% 92.326%, 54.518% 92.343%, 53.828% 92.513%, 53.617% 92.535%, 53.497% 92.523%, 53.293% 92.465%, 51.668% 91.079%, 49.979% 90.229%, 47.826% 90.589%, 46.778% 90.764%, 46.019% 90.156%, 45.696% 89.117%, 45.287% 87.798%, 45.106% 87.719%, 43.960% 88.480%, 43.362% 88.877%, 42.742% 88.968%, 42.072% 88.783%, 41.765% 88.699%, 41.487% 88.437%, 41.059% 88.704%, 40.850% 88.742%, 40.729% 88.737%, 40.521% 88.685%, 39.007% 87.591%, 37.704% 86.215%, 35.549% 86.775%, 35.331% 86.798%, 35.207% 86.785%, 34.998% 86.720%, 33.732% 85.950%, 32.703% 84.898%, 31.116% 85.067%, 30.680% 85.114%, 30.323% 84.733%, 30.191% 84.329%, 29.832% 83.228%, 28.995% 83.173%, 28.076% 83.295%, 26.943% 83.445%, 25.847% 83.449%, 24.798% 82.879%, 24.460% 82.696%, 24.127% 82.532%, 23.922% 82.210%, 23.562% 81.643%, 23.081% 81.436%, 22.433% 81.621%, 21.788% 81.805%, 21.216% 81.645%, 20.654% 81.300%, 20.023% 80.913%, 19.254% 80.808%, 18.611% 80.534%, 17.155% 79.914%, 15.404% 79.440%, 15.082% 77.453%, 15.005% 76.973%, 14.761% 76.941%, 14.379% 77.136%, 13.860% 77.401%, 13.338% 77.667%, 12.783% 77.850%, 11.763% 78.186%, 11.235% 77.950%, 10.775% 76.968%, 10.580% 76.552%, 10.434% 76.117%, 10.306% 75.677%, 10.076% 74.888%, 9.927% 74.154%, 8.732% 74.619%, 7.926% 74.933%, 7.598% 73.950%, 6.999% 73.475%, 6.793% 72.587%, 6.908% 71.777%, 6.889% 70.875%, 6.928% 70.661%, 6.965% 70.542%, 7.032% 70.438%, 7.873% 69.113%, 7.803% 68.889%, 6.231% 68.152%, 5.051% 67.598%, 4.026% 67.410%, 3.242% 68.642%, 3.132% 68.815%, 2.898% 68.962%, 2.929% 69.162%, 3.191% 70.886%, 1.706% 72.331%, 2.168% 74.103%, 2.294% 74.585%, 2.034% 75.104%, 1.527% 75.348%, 1.012% 75.597%, 0.662% 75.304%, 0.316% 74.822%"
  );
});

test("Check if the Code that Generates the HTML and CSS Content is not empty", async () => {
  const svgContent = await new Promise((resolve, reject) => {
    fs.readFile(svgPath, "utf-8", (err, svg) => {
      if (err) {
        reject(err);
      } else {
        resolve(svg);
      }
    });
  });

  const parsedSvg = SVGParser.parse(svgContent);

  const testObj = {
    htmlContent: " ",
    cssContent: " ",
  };

  expect(generateContent(parsedSvg)).not.toBe(testObj);
});
